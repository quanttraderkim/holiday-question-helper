#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
명절 질문 답변 데이터베이스
"""

# 질문 카테고리 정의
QUESTION_CATEGORIES = {
    "marriage": "결혼 관련",
    "childbirth": "육아 관련",
    "job": "취업/진로",
    "study": "학업 관련",
    "appearance": "외모 관련",
    "age": "나이 관련"
}

# 답변 스타일 정의
RESPONSE_STYLES = {
    "humorous": "유머러스 (웃으면서 넘어가기)",
    "witty": "사이다 (속시원하게)",
    "polite": "정중한 회피 (부드럽게 피하기)",
    "reverse": "역공 (질문 되돌리기)",
    "wise": "현명한 답변 (진지하면서 센스있게)"
}

# 결혼 관련 질문 답변 데이터베이스
MARRIAGE_RESPONSES = {
    "결혼은 언제 하니?": {
        "humorous": [
            "제 결혼식 날짜는 제가 제일 궁금해요. 정해지면 바로 초대장 보내드릴게요!",
            "결혼? 아직 연애 튜토리얼 단계인데요! 본게임은 언제 시작할지 모르겠네요.",
            "이모님이 복권 번호 알려주시면 당첨되는 날 바로 결혼할게요!"
        ],
        "witty": [
            "삼촌은 언제 재혼하세요? 아, 실례했습니다. 사적인 질문은 곤란하시죠?",
            "결혼보다 제 행복이 먼저라서요. 행복하면 자연스럽게 되겠죠!",
            "저보다 조카 결혼 걱정하시는 게 신기하네요. 제가 더 걱정 안 하는데요?"
        ],
        "polite": [
            "좋은 인연 있으면 자연스럽게 하게 될 것 같아요. 응원해 주세요!",
            "아직은 제 인생에서 다른 것들에 집중하고 있어요.",
            "때가 되면 하게 되겠죠. 걱정해 주셔서 감사해요!"
        ],
        "reverse": [
            "좋은 사람 소개해 주세요! 조건은 삼촌 같은 분이요~",
            "이모부 같은 좋은 분 어디서 만나셨어요? 노하우 좀 알려주세요!",
            "결혼 잘 하려면 어떻게 해야 하나요? 선배님의 조언이 필요해요!"
        ],
        "wise": [
            "결혼은 타이밍이 중요하다고 생각해요. 서두르지 않고 신중하게 결정하려고요.",
            "결혼보다 먼저 제 삶을 충실하게 사는 게 중요하다고 생각해요.",
            "좋은 배우자를 만나는 것도 중요하지만, 제가 좋은 배우자가 되는 것도 중요하잖아요. 준비 중입니다!"
        ]
    },
    "왜 아직도 안 결혼했어?": {
        "humorous": [
            "제가 너무 완벽해서 저한테 맞는 사람 찾기가 힘들어요! (농담이에요)",
            "결혼 시장에 품절 직전 상품이 나올 때까지 기다리는 중이에요!",
            "아직 제 가치가 올라가는 중이라서요. 최고점에서 결혼하려고요!"
        ],
        "witty": [
            "결혼은 의무가 아니라 선택이잖아요. 제 선택을 존중해 주세요.",
            "'아직도'라는 표현이 좀 그렇네요. 제게는 '아직'이 아니라 '아직 안'이에요.",
            "이모님 시대랑 지금은 달라요. 요즘은 30대 결혼도 이른 편이에요!"
        ],
        "polite": [
            "인연이 닿지 않았을 뿐이에요. 조급해하지 않으려고요.",
            "제 페이스대로 살고 있어요. 걱정 안 하셔도 돼요!",
            "다들 응원해 주셔서 감사한데, 제 선택을 믿어주시면 좋겠어요."
        ],
        "reverse": [
            "이모는 왜 그렇게 제 결혼이 궁금하세요? 혹시 소개팅 주선하려고요?",
            "결혼 안 한 게 그렇게 이상한가요? 요즘 다들 늦게 해요!",
            "삼촌 결혼 생활 행복하세요? 행복해 보이면 저도 하고 싶어지는데!"
        ],
        "wise": [
            "결혼은 제 인생에서 중요한 결정이라 신중하게 하고 싶어요.",
            "결혼보다 제가 누구인지 먼저 알아가는 시간이 필요했어요.",
            "혼자서도 행복한 삶을 살 수 있다는 걸 배우고 있어요."
        ]
    },
    "소개팅 안 해?": {
        "humorous": [
            "소개팅은 자주 하는데 성사는 안 돼요. 제가 너무 매력적이라 상대가 부담스러워하나봐요!",
            "소개팅? 그거 요금제 있나요? 무제한으로 해볼까요?",
            "소개팅 앱에서 매칭만 수백 개인데 시간이 없어요!"
        ],
        "witty": [
            "이모가 소개해 주시면 해볼게요. 단, 책임지셔야 해요!",
            "소개팅보다 자연스러운 만남이 좋아요. 억지로는 잘 안 되더라고요.",
            "소개팅 안 해서 문제가 아니라 조건 맞는 사람이 없는 게 문제죠."
        ],
        "polite": [
            "좋은 분 있으면 소개해 주세요! 감사히 만나보겠습니다.",
            "자연스럽게 만남이 생기면 좋겠어요. 소개팅은 부담스러워서요.",
            "지금은 일에 집중하고 있어서 소개팅 시간이 없어요."
        ],
        "reverse": [
            "이모가 좋은 분 알고 계세요? 소개해 주시면 안 돼요?",
            "삼촌 주변에 괜찮은 분 없어요? 삼촌 친구분이면 믿을 만할 것 같은데!",
            "소개팅 잘하는 비법 있어요? 성공률 높이는 팁 좀 알려주세요!"
        ],
        "wise": [
            "소개팅도 좋지만, 제가 준비됐을 때 하는 게 서로에게 좋을 것 같아요.",
            "좋은 사람을 만나는 것도 중요하지만, 제가 좋은 사람이 되는 게 먼저라고 생각해요.",
            "인위적인 만남보다 자연스러운 인연을 기다리는 중이에요."
        ]
    }
}

# 육아 관련 질문 답변
CHILDBIRTH_RESPONSES = {
    "애는 언제 낳니?": {
        "humorous": [
            "아기 주문하면 바로 배송되나요? 배송 기간 좀 알려주세요!",
            "출산 계획표 작성 중인데 이모님께 검토 부탁드려도 될까요?",
            "제가 먼저 애가 되어야 애를 낳을 수 있을 것 같아요!"
        ],
        "witty": [
            "이모는 언제 손주 보세요? 아, 그것도 사적인 질문이죠?",
            "제 인생 계획에 타인의 의견은 없어요. 걱정 안 하셔도 돼요.",
            "애 낳는 게 의무인가요? 선택 아닌가요?"
        ],
        "polite": [
            "계획이 있으면 자연스럽게 알게 되실 거예요.",
            "아직은 준비가 안 된 것 같아요. 이해해 주세요.",
            "때가 되면 하게 되겠죠. 응원해 주세요!"
        ],
        "reverse": [
            "이모는 몇 명 낳으셨어요? 육아 팁 좀 알려주세요!",
            "요즘 출산율 낮다던데, 이모님 생각엔 왜 그런 것 같아요?",
            "좋은 부모가 되는 방법 좀 알려주세요!"
        ],
        "wise": [
            "아이는 축복이지만, 준비된 상태에서 맞이하고 싶어요.",
            "출산은 신중하게 결정해야 할 중요한 일이라고 생각해요.",
            "아이를 행복하게 키울 자신이 생기면 낳으려고요."
        ]
    },
    "둘째는 언제?": {
        "humorous": [
            "첫째가 동생 달라고 하면 바로 주문할게요!",
            "둘째 쿠폰 있으면 고려해 볼게요!",
            "첫째 키우는데 전 재산 다 쓰고 있어요!"
        ],
        "witty": [
            "이모는 셋째 언제? 아, 실례했습니다.",
            "한 명도 벅찬데 둘째는 무슨요!",
            "제 자궁은 제가 결정해요."
        ],
        "polite": [
            "아직은 계획이 없어요.",
            "첫째에 집중하고 싶어요.",
            "여유가 되면 생각해 볼게요."
        ],
        "reverse": [
            "이모는 몇 명 낳으셨어요? 후회 안 하세요?",
            "둘째 낳으면 뭐가 좋아요?",
            "외동으로 키우면 안 되나요?"
        ],
        "wise": [
            "첫째를 잘 키우는 게 우선이에요.",
            "아이 수보다 질이 중요하다고 생각해요.",
            "경제적, 정신적 여유가 생기면 고려하겠습니다."
        ]
    }
}

# 취업/진로 관련 질문 답변
JOB_RESPONSES = {
    "취업은 했니?": {
        "humorous": [
            "네! 백수로 취업했습니다. 복지 좋고 자유로워요!",
            "취업 준비가 제 직업이에요. 연봉은 -500만원이고요!",
            "취업? 저는 평생 학생으로 살 계획이에요!"
        ],
        "witty": [
            "삼촌 회사에서 채용 안 하세요? 추천서 써주실 수 있어요?",
            "요즘 취업이 쉬운 줄 아세요? 경쟁률 보셨어요?",
            "취업 안 한 게 아니라 못 한 거예요. 차이 아시죠?"
        ],
        "polite": [
            "열심히 준비하고 있어요. 응원해 주세요!",
            "시간이 좀 걸리고 있지만 포기하지 않고 있어요.",
            "좋은 기회 있으면 연락 부탁드려요!"
        ],
        "reverse": [
            "삼촌 회사 연봉이랑 복지 어때요? 추천해 주실래요?",
            "요즘 좋은 일자리 있으면 추천 좀 해주세요!",
            "취업 성공 비결 좀 알려주세요!"
        ],
        "wise": [
            "좋은 회사보다 제게 맞는 회사를 찾고 있어요.",
            "취업은 인생의 시작이니까 신중하게 결정하려고요.",
            "조금 늦어도 후회 없는 선택을 하고 싶어요."
        ]
    },
    "월급은 얼마야?": {
        "humorous": [
            "기밀입니다! 국가 기밀!",
            "삼촌 월급 먼저 알려주시면 제가 그다음에 말씀드릴게요!",
            "돈 많이 벌어요! 꿈에서요!"
        ],
        "witty": [
            "그건 좀 사적인 질문 아닌가요?",
            "삼촌 월급은 얼마예요? 제가 먼저 물어봐도 되나요?",
            "통장 잔고 공개하실래요? 저도 할게요!"
        ],
        "polite": [
            "죄송하지만 그건 말씀드리기 어려워요.",
            "개인적인 부분이라 공개하지 않아요.",
            "월급보다 일이 재미있어요!"
        ],
        "reverse": [
            "삼촌은 얼마 받으세요? 제 목표를 정하고 싶어서요!",
            "이모부 월급으로 생활 여유로우세요?",
            "요즘 물가에 얼마는 받아야 사나요?"
        ],
        "wise": [
            "돈보다 경험을 쌓는 단계예요.",
            "적정 수준 받고 있어요. 만족하고 있습니다.",
            "생활하는 데 문제없어요. 걱정 안 하셔도 돼요!"
        ]
    }
}

# 학업 관련 질문 답변
STUDY_RESPONSES = {
    "성적은 어때?": {
        "humorous": [
            "성적? 아, 그거 숫자로 표시하는 거 있었죠!",
            "학점은 낮지만 인성은 높아요!",
            "F는 Fantastic의 F예요!"
        ],
        "witty": [
            "삼촌 성적은 어땠어요? 자랑하실 만하셨나요?",
            "성적이 인생의 전부는 아니잖아요.",
            "성적표는 개인정보예요!"
        ],
        "polite": [
            "열심히 하고 있어요.",
            "나름 만족스러워요.",
            "필요한 만큼은 받고 있어요!"
        ],
        "reverse": [
            "이모는 학창시절 성적 어땠어요?",
            "성적 안 좋아도 성공한 사람 많지 않나요?",
            "공부 잘하는 비결 좀 알려주세요!"
        ],
        "wise": [
            "성적보다 배우는 과정이 중요해요.",
            "제 목표를 달성하는 데 필요한 만큼 받고 있어요.",
            "성적은 하나의 지표일 뿐이에요."
        ]
    }
}

# 외모 관련 질문 답변
APPEARANCE_RESPONSES = {
    "살 찐 것 같은데?": {
        "humorous": [
            "네! 행복이 살로 가더라고요!",
            "이모님 음식이 너무 맛있어서요!",
            "풍채가 있어야 복도 있대요!"
        ],
        "witty": [
            "이모는 왜 그렇게 말라셨어요? 아, 실례했습니다.",
            "외모 지적은 예의가 아니에요.",
            "제 몸은 제가 관리해요. 걱정 안 하셔도 돼요."
        ],
        "polite": [
            "건강하게 잘 먹고 있어요!",
            "요즘 운동도 하고 있어요.",
            "적정 체중 유지하고 있어요."
        ],
        "reverse": [
            "이모는 체중 관리 어떻게 하세요?",
            "다이어트 비법 있으면 알려주세요!",
            "건강한 식습관 팁 좀 주세요!"
        ],
        "wise": [
            "외모보다 건강이 중요해요.",
            "제 몸 상태는 제가 제일 잘 알아요.",
            "행복하게 사는 게 제일이에요."
        ]
    },
    "키가 작네?": {
        "humorous": [
            "농축된 매력이라고 생각하시면 돼요!",
            "작은 고추가 맵잖아요!",
            "키는 작아도 꿈은 크답니다!"
        ],
        "witty": [
            "이모는 키가 크시네요? 그게 뭐 대단한가요?",
            "선천적인 거 가지고 뭐라고 하시면 곤란해요.",
            "외모 지적은 실례예요."
        ],
        "polite": [
            "제 키에 만족해요!",
            "키보다 중요한 게 많아요.",
            "이게 제 키예요!"
        ],
        "reverse": [
            "이모는 키가 얼마예요?",
            "키 크면 뭐가 좋아요?",
            "키 작아서 불편한 적 없는데요?"
        ],
        "wise": [
            "키는 바꿀 수 없으니 받아들이고 있어요.",
            "외모보다 내면이 중요하죠.",
            "제 키에 자신감 있어요!"
        ]
    }
}

# 나이 관련 질문 답변
AGE_RESPONSES = {
    "벌써 그 나이야?": {
        "humorous": [
            "네! 시간이 빠르죠? 이모님도 벌써 그 나이시잖아요!",
            "나이는 숫자일 뿐이에요!",
            "마음은 아직 18살이에요!"
        ],
        "witty": [
            "이모도 벌써 그 나이네요? 세월 빠르시죠?",
            "'벌써'가 아니라 '아직'이죠!",
            "나이 드는 건 자연스러운 거예요."
        ],
        "polite": [
            "네, 시간 참 빠르네요!",
            "그래도 젊다고 생각해요!",
            "열심히 살다보니 어느새 이 나이네요."
        ],
        "reverse": [
            "이모는 몇 살이세요? 젊어 보이세요!",
            "나이 들수록 뭐가 좋아요?",
            "나이 드는 거 무섭지 않으세요?"
        ],
        "wise": [
            "나이보다 어떻게 사느냐가 중요해요.",
            "나이 값 하며 살고 있어요.",
            "나이는 경험의 증거예요."
        ]
    },
    "나이 값을 못하네": {
        "humorous": [
            "젊어 보인다는 칭찬으로 받아들일게요!",
            "나이 값 하기엔 너무 재밌어요!",
            "영혼은 늙지 않아요!"
        ],
        "witty": [
            "나이 값을 어떻게 해야 하는데요?",
            "꼰대처럼 살라는 건가요?",
            "나이 값 하면 재미없잖아요."
        ],
        "polite": [
            "제 방식대로 살고 있어요.",
            "나이에 맞춰 사는 건 구시대적이에요.",
            "행복하게 사는 게 제일이죠!"
        ],
        "reverse": [
            "나이 값은 어떻게 하는 건가요?",
            "이모는 나이 값 하고 계세요?",
            "나이 값 하며 사는 게 뭐예요?"
        ],
        "wise": [
            "나이는 숫자일 뿐, 마음가짐이 중요해요.",
            "제 나이에 맞게 행복하게 살고 있어요.",
            "나이보다 삶의 질이 중요해요."
        ]
    }
}

# 모든 답변 데이터 통합
ALL_RESPONSES = {
    "marriage": MARRIAGE_RESPONSES,
    "childbirth": CHILDBIRTH_RESPONSES,
    "job": JOB_RESPONSES,
    "study": STUDY_RESPONSES,
    "appearance": APPEARANCE_RESPONSES,
    "age": AGE_RESPONSES
}

def detect_category(question: str) -> str:
    """질문으로부터 카테고리 자동 감지"""
    question_lower = question.lower()
    
    # 키워드 기반 카테고리 감지
    keywords = {
        "marriage": ["결혼", "소개팅", "연애", "남자친구", "여자친구", "애인"],
        "childbirth": ["애", "아이", "아기", "출산", "임신", "둘째", "셋째", "손주"],
        "job": ["취업", "직장", "회사", "월급", "연봉", "직업", "일"],
        "study": ["성적", "학점", "공부", "시험", "대학", "학교"],
        "appearance": ["살", "키", "외모", "얼굴", "몸무게", "다이어트"],
        "age": ["나이", "살", "세", "젊", "늙"]
    }
    
    for category, words in keywords.items():
        for word in words:
            if word in question:
                return category
    
    return "marriage"  # 기본값

def get_response(question_key: str, style: str) -> str:
    """특정 질문과 스타일에 맞는 답변 반환 (기존 호환성 유지)"""
    import random
    
    if question_key in MARRIAGE_RESPONSES:
        if style in MARRIAGE_RESPONSES[question_key]:
            responses = MARRIAGE_RESPONSES[question_key][style]
            return random.choice(responses)
    
    return "적절한 답변을 찾을 수 없습니다."

def get_all_response(category: str, question_key: str, style: str) -> str:
    """모든 카테고리의 답변 반환"""
    import random
    
    if category in ALL_RESPONSES:
        if question_key in ALL_RESPONSES[category]:
            if style in ALL_RESPONSES[category][question_key]:
                responses = ALL_RESPONSES[category][question_key][style]
                return random.choice(responses)
    
    return "적절한 답변을 찾을 수 없습니다."
